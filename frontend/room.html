<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Johka Live â€“ Room</title>
  <link rel="stylesheet" href="/css/style-room.css" />
  <style>
    /* Tabs bovenaan de chat */
    #chatTabs {
      display: flex;
      background: #111;
      border-bottom: 1px solid #222;
    }
    #chatTabs button {
      flex: 1;
      background: #222;
      border: none;
      color: #ccc;
      padding: 8px 4px;
      cursor: pointer;
      font-weight: 500;
      transition: 0.2s;
    }
    #chatTabs button.active {
      background: var(--accent, #ff3c7d);
      color: #fff;
    }
    #chatTabs button:hover {
      background: var(--accent, #ff3c7d);
      color: #fff;
    }
    .tabContent {
      display: none;
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      font-size: 14px;
    }
    .tabContent.active {
      display: block;
    }
  </style>
</head>

<body>
  <!-- ğŸ” NAVIGATIE -->
  <nav>
    <div id="logo">Johka ğŸ’«</div>
    <div id="navLinks">
      <a href="/index.html">ğŸ  Home</a>
      <button id="goLive">ğŸ¥ Go Live</button>
      <button id="toggleCam">ğŸ“¸ Cam</button>
      <button id="toggleMic">ğŸ™ï¸ Mic</button>
      <button id="privateBtn">ğŸšª Prive</button>
      <button id="reconnectBtn">ğŸ” Reconnect</button>
      <button id="leave">ğŸšª Leave</button>
      <button id="viewersBtn">ğŸ‘¥ Viewers</button>
    </div>
  </nav>

  <!-- ğŸ›ï¸ LIVE CONTROLS -->
<div id="liveControlBar" style="display:none;">
  <div id="liveStats">
    <span id="liveRes">960x540</span> â€¢ 
    <span id="liveFps">29 FPS</span> â€¢ 
    <span id="liveAudio">ğŸ™ï¸ aan</span>
  </div>
  <div>
    <button id="stopLiveBtn">â¹ï¸ Stop uitzending</button>
  </div>
</div>
<div id="obsHint">Gebruik OBS voor hoge kwaliteit streams ğŸ¥</div>

  <!-- ğŸ”´ STATUS -->
  <div id="streamStatus">
    <div class="left">
      <div id="liveDot"></div>
      <span id="status">verbonden: nee</span>
      <span>ğŸ‘€ <span id="viewCount">0</span></span>
    </div>
    <div class="right">ğŸ’¸ <span id="tipTotalBar">0</span> tokens</div>
  </div>

  <!-- ğŸ¬ MAIN -->
  <main>
    <section id="stage">
      <p style="color:#666;">Camera niet actief...</p>
    </section>

    <aside id="sidebar">

      
      <!-- âœ… TABS -->
      <div id="chatTabs">
        <button data-tab="chat" class="active">ğŸ’¬ Chat</button>
        <button data-tab="users">ğŸ‘¥ Users</button>
        <button data-tab="private">ğŸ”’ PrivÃ©</button>
        <button data-tab="settings">âš™ï¸ Instellingen</button>
      </div>

     
      <!-- âœ… TAB-INHOUD -->
      <div id="chatTab" class="tabContent active">
        <div id="chat"></div>

        <form id="chatForm" autocomplete="off">
          <input id="chatInput" type="text" placeholder="Typ je bericht..." />
          <button>Stuur</button>
        </form>

        <div id="donationBar">
          <input id="donateInput" type="number" min="1" placeholder="10" /> 
          <button id="donateBtn">ğŸ’¸ Tip</button>
        </div>
      </div>

      <div id="usersTab" class="tabContent">
        <p>ğŸ‘¥ Gebruikerslijst verschijnt hier...</p>
      </div>

      <div id="privateTab" class="tabContent">
        <p>ğŸ”’ PrivÃ©berichten of sessies komen hier...</p>
      </div>

      <div id="settingsTab" class="tabContent">
        <p>âš™ï¸ Stream- en accountinstellingen...</p>
      </div>
    </aside>
  </main>

  <footer>Johka Live â€“ powered by LiveKit âš¡</footer>

  <script>
    window.API = "https://api.johka.be";
    window.WS_URL = "wss://live.johka.be";

    // Tab functionaliteit
    document.addEventListener("DOMContentLoaded", () => {
      const tabs = document.querySelectorAll("#chatTabs button");
      const contents = document.querySelectorAll(".tabContent");

      tabs.forEach(btn => {
        btn.addEventListener("click", () => {
          tabs.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          const target = btn.dataset.tab;
          contents.forEach(c => c.classList.remove("active"));
          document.getElementById(target + "Tab").classList.add("active");
        });
      });
    });

    window.updateLivekitStatus = function(isConnected) {
      const dot = document.getElementById("liveDot");
      const status = document.getElementById("status");
      if (isConnected) {
        dot.style.background = "var(--live)";
        status.textContent = "verbonden: ja";
        status.style.color = "var(--ok)";
      } else {
        dot.style.background = "var(--muted)";
        status.textContent = "verbonden: nee";
        status.style.color = "var(--muted)";
      }
    };
  </script>

  <script type="module" src="/js/room.js" defer></script>
</body>
</html>
